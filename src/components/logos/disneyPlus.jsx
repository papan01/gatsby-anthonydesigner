/* eslint-disable react/forbid-prop-types */
import React, { useRef } from 'react';
import PropTypes from 'prop-types';
import { graphql, useStaticQuery } from 'gatsby';
import { Global } from '@emotion/core';
import { Power3, Back } from '../../lib/gsap';
import useLogos from './useLogos';
import useTimeline from '../../hooks/animation';
import SquareLink from '../squareLink';

const TITLE = 'Disney Plus';
const COLOR = '#2A00A8';
const LINK = 'https://newav.netlify.app/work/disney-plus/';

const query = graphql`
  query {
    cover: file(relativePath: { eq: "disney-plus.jpg" }) {
      childImageSharp {
        fluid(maxWidth: 480, quality: 90) {
          ...GatsbyImageSharpFluid_withWebp
        }
      }
    }
  }
`;

function DisneyPlus({ fadeInStyle }) {
  const { cover } = useStaticQuery(query);
  const tl = useTimeline({ paused: true });
  const svg = useRef();
  const lettersGroup = useRef();
  const flypath = useRef();
  const plus = useRef();
  const { globalColor, onMouseEnter, onMouseLeave } = useLogos(COLOR, tl, () => {
    const letters = lettersGroup.current.querySelectorAll('path');
    tl.to(svg.current, 0.4, { opacity: 0, ease: Power3.easeOut });
    tl.set(svg.current, { opacity: 1 });
    tl.set(letters, { opacity: 0 });
    tl.set(flypath.current, { drawSVG: '0%' });
    tl.set(plus.current, { transformOrigin: 'center', scale: 0.5, opacity: 0 });
    tl.staggerTo(letters, 1, { opacity: 1 }, 0.07);
    tl.to(flypath.current, 1.5, { drawSVG: '100%', ease: Power3.easeInOut }, '-=1.2');
    tl.to(plus.current, 0.5, { scale: 1, opacity: 1, ease: Back.easeOut }, '-=.5');
  });
  return (
    <SquareLink
      cover={cover}
      fadeInStyle={fadeInStyle}
      href={LINK}
      title={TITLE}
      onMouseEnter={onMouseEnter}
      onMouseLeave={onMouseLeave}
    >
      {globalColor && <Global styles={{ body: { backgroundColor: globalColor } }} />}
      <svg ref={svg} viewBox="0 0 977.3 564.9" width="53%" fill="currentColor">
        <g ref={lettersGroup}>
          <path d="M62.7 262.3c4.7 1.4 8.3 2.3 11.6 3.6 1.2.5 2.5 1.8 2.8 3 .2.6-1.4 2.3-2.5 2.6-7.4 2.1-14.8 2.6-21.9-.9-3.4-1.7-5.2-4.8-3.5-8.3 3.8-7.9 7.7-15.2 17.5-18.2 26.2-8 52.6-9.3 79.5-5.7 53.2 7.3 101.4 26.5 143.9 59.6 20.2 15.7 37 34.3 48 57.9 15.1 32.4 3.5 71.5-28.3 90.9-21 12.8-44 18.6-68.2 19.9-17.4.9-34.5-1.1-52-5.3-.3 1.9-.7 3.4-.9 5-.7 6.5-2.8 8.9-8.9 10.3-6.4 1.4-11.7-.3-14-5.7-2-4.5-3.3-9.4-4.1-14.3-.6-3.8-1.9-6.1-5.5-7.8-23.2-11.4-43.3-26.7-58.9-47.6-6.9-9.2-6.3-18.5 2.4-26.1 11-9.7 24.6-14.3 38.3-18.5 7.9-2.4 16.1-4.2 24.3-6.3 1.1-10.3 2-20.9 3.4-31.5.7-5.1 1.9-10.1 3.5-15 .7-2.1 2.7-5 4.4-5.2 1.8-.2 4.2 2.1 5.8 3.8 6.6 7 7.4 16.1 8.4 25 .7 6.8.9 13.6 1.4 21.1 6.3 0 12.7-.8 18.9.2 14.6 2.2 29.3 4.3 43.4 8.2 7.3 2 14.1 7.3 20 12.4 6.5 5.7 8 13.6 4.8 22-3.1 8.3-9.3 13.9-17.9 14.9-4.9.6-10.2-2.2-15.2-3.7-.4-.1-.6-3.5 0-4 2.2-1.7 5.1-2.4 7.3-4.1 2.1-1.6 4.7-3.8 5-6 .2-1.6-2.8-4.6-5-5.3-9.2-2.7-18.5-5.5-28-6.9-11.3-1.7-22.8-1.9-34.4-2.8v66.3c6.3.9 12.1 2 18 2.6 28.2 2.8 55.6-.5 80.9-14 18.1-9.6 29-24.3 28.2-45.7-.4-11.9-5-22.6-11.5-32.5-12.2-18.6-28.8-32.6-47.1-44.8-39.7-26.4-83.3-42.8-130.7-48.1-19.7-2.2-39.6-2.3-58.9 3.5-.9.1-1.9.6-4.3 1.5zm100.1 112.2c-19.3 1.6-37.4 3.3-54.7 10-7.9 3.1-8.7 7.1-2.7 13.2 14.7 14.9 32 25.7 51.6 33 1 .4 2 .5 3.6.9.8-19.1 1.5-37.6 2.2-57.1z" />
          <path d="M354.4 326.7c-1 1.3-1.8 2.5-2.7 3.7-4.4 6.1-8.8 6.1-12.8-.2-2.4-3.8-4.4-7.8-2.9-12.7.3-1-.4-2.5-1.1-3.4-8-10-8-20.3-1.7-31 10.3-17.5 26-27.2 45.7-30.3 6.3-1 12.9-.6 19.3-.2 4.9.3 9.1 2.6 12.2 6.8.9 1.2 3 1.8 4.7 2.1 13.1 2.6 18.7 11.2 14.9 24.1-4.6 15.5-15.8 25.9-29.1 34.2-11.8 7.4-24.6 11.8-38.8 9-2.5-.6-5-1.4-7.7-2.1zm7.8-16.9c5.8.3 10.1.8 14.4.6 15.8-.9 29-6.6 37-21.2 2-3.6 3.3-7.6.5-11.2-2.8-3.6-6.9-2.8-10.6-1.6-17.5 5.7-29.4 18.4-41.3 33.4zm6-35.9c-12.8 1-25.7 14.9-22.9 24.7l22.9-24.7zm11.5 154.6c-.4 3.8-.8 10.2-1.9 16.4-.4 1.9-2.6 4.3-4.6 5-8.5 3.3-17.2-1.3-17.5-10.1-.7-20.3-.6-40.6-.4-60.8.1-7.6 1.4-15.2 2.3-22.8.2-1.9.9-3.9 1.9-5.6 2.4-4 7.4-4.8 9.8-.9 3 4.8 6.5 10.2 7 15.5 1.7 20.2 2.3 40.5 3.4 63.3z" />
          <path d="M408.4 377.7c3.9.7 7.7 1.6 11.6 1.9 11.8 1.1 23.6 1.5 35.3 3.1 6.6.9 13.3 3 19.5 5.5 6.3 2.5 10.3 7.7 12 14.4 2.1 8.8 2.2 17.6-1.1 26-1.3 3.5-4.1 7.4-7.2 9.1-20.5 10.7-41.9 14.3-63.8 4.9-6.1-2.6-11.8-6.9-16.7-11.6-11.3-10.9-6.8-27 8.5-30.8 16.1-4 31.7-.6 46.9 4.6.9.3 1.8.9 2.6 1.5 5.3 3.3 5.3 7.1-.2 10-8.8 4.5-18 4.3-27.2 1.4-4.7-1.5-9.2-3.8-13.9-5.4-2-.7-4.6-1.3-6.3-.5-2.2 1-4.5 3.1-5.2 5.3-.5 1.3 1.4 4.4 3 5.3 2.6 1.5 5.9 2.5 8.9 2.8 15.9 1.6 31.6.4 46.3-6.6 4.2-2 9.7-4 9.1-9.9s-6.3-7.2-10.9-7.8c-15.1-2.1-30.3-3.5-45.5-5.3-6.2-.7-12.5-1.5-18.7-2.9-6.1-1.5-8-4.5-8.2-10.8-.5-14.3 3.8-21.7 17-27.4 18.5-8.1 37.9-11 58-9.3 7.3.6 14.5 1.7 21.7 3.1 3.3.7 7.6 1.3 7.6 6.3 0 4.7-4 9.5-8.8 10.2-6.7.9-13.6 1.2-20.4 2-16.2 1.9-32.3 3.9-48.5 6.1-2.1.3-4.1 1.8-6.2 2.7.5.6.6 1.4.8 2.1z" />
          <path d="M517.3 389.2c-.5 11.9-.9 23.8-1.6 35.7-.3 5-1.1 9.9-1.8 14.8-.7 4.8-3.8 7.4-8.4 7.8-4.9.4-8.6-2-10.1-6.5-1.4-4-2.3-8.4-2.5-12.6-.7-21.8 1.7-43.2 8.7-63.9.8-2.3 1.9-4.6 3.3-6.7 4.2-6.5 9.8-7.5 14.7-1.5 7.9 9.7 15 19.9 22.1 30.1 4.4 6.3 8.1 13 12.2 19.5a9 9 0 0 0 4.6 3.8c0-3.6.6-7.3-.1-10.8-3.9-17.8-8.2-35.6-12.3-53.4-.7-3.1-1.5-6.2-1.5-9.3 0-5.5 3.2-7.3 7.8-4.2 8.8 5.9 15 14.2 19.3 23.7 10.1 22.2 11.6 45.3 5.7 68.7-1.2 4.6-3.9 9.3-7.2 12.8-6 6.5-14.7 6.4-20.8 0-4.4-4.7-8.4-9.9-11.7-15.5-5.6-9.2-10.5-18.9-15.7-28.4-.9-1.6-1.9-3-2.9-4.5-.6.1-1.2.3-1.8.4z" />
          <path d="M622.7 384.4h26.5c3.7 0 5 2.1 5.1 5.3 0 2.2-.3 4.3-.3 6.5 0 3.7-1.9 5.5-5.4 5.7l-30.4 1.8c-.8 0-1.7.1-3 .2-1.8 6-3.6 12.1-5.7 19.1 5.5-1 10.2-1.9 14.9-2.7 8-1.3 16.1-2.7 24.1-3.6 5.2-.6 9.1 2.3 10.8 6.9 1.6 4.3.1 7.8-3.3 10.6-13.8 11.2-28.9 19.3-47.1 20.7-10.5.8-23.7-12-23.1-22.5.5-8.4 2.7-16.6 4-24.9.4-2.3.3-4.7.2-7-.2-2.3-1-4.5-1.2-6.8-.4-3.4 1-6.4 4.5-6.7 5.1-.4 6.9-3.7 8.5-7.6 1.1-2.7 2.5-5.4 4.1-8.5-6.6-1-12.1-3.3-15.6-9.1-3.2-5.3-2.5-7.9 3.5-9.3 20.1-4.7 40.6-7.2 61.3-6.9 8.4.1 17.7 8.7 19.1 17 .5 3.1-.8 4.9-3.7 5.4-6.2 1-12.5 2.1-18.7 2.8-6.1.7-12.3 1.1-18.4 1.1-5 0-8.3 1.4-8.9 6.9-.3 1.5-1.1 3.2-1.8 5.6z" />
          <path d="M689.2 406.8c7.5-9.8 14.6-19.9 22.7-29.1 6.3-7.2 13.4-14.1 21.1-19.7 16.8-12.1 31.1-5.6 34.6 14.9 5.1 30.7-17.1 66.4-46.9 74.9-4.7 1.3-9.8 1.2-14.8 1-3.2-.1-4.7.6-5.9 3.6-9.9 25-17.2 50.6-20.4 77.4-.9 7.1-4.7 9-10.6 4.7-12.3-9-15.6-21.7-13.9-36.3 2.5-22.1 10.2-42.6 19.3-62.6 1.4-3 1.3-5.3-.1-8.4-6.7-15.2-4.3-30.3 1.8-45 5.9-14.4 15-26.6 26.4-37.2.9-.8 1.7-1.6 2.7-2.2 3.2-1.9 5.6-1 5.2 2.7-.6 5-1.5 10.3-3.6 14.8-4.8 10.4-10.8 20.2-15.5 30.6-2.1 4.8-2.3 10.4-3.4 15.7.4.1.8.2 1.3.2zm24 15.4c18.6-1.9 35.5-15.7 40.1-32.4 1-3.8 1.3-7.9 1.3-11.8 0-1.7-1.1-4-2.5-4.8-.9-.5-3.4.8-4.7 1.9-2.3 1.9-4.2 4.3-6.2 6.5-10.7 12.3-20.2 25.4-28 40.6z" />
        </g>
        <path
          ref={plus}
          d="M870.8 394.6c0 6.2.2 12 0 17.8-.5 11.1-1.3 22.3-1.9 33.4-.2 4.1-2.4 5.5-6.2 5.4-2.3-.1-4.7 0-7 0-6.6 0-7.3-.8-7-7.7.7-14.5 1.3-28.9 2-43.4.1-1.6 0-3.3 0-5.5h-50.2c-5.2 0-6.7-1.6-6.8-6.9-.2-13.8-.2-13.8 13.4-13.8H850c-.6-6.9-.9-13.5-1.8-20-1.4-10.5-3.1-21-4.6-31.6-.8-5.3.3-6.6 5.7-6.6 16.3-.1 13.6-1 15.7 12.5 2 12.8 3.2 25.7 4.8 38.6.3 2.1.3 4.3.5 6.9h51.2c5.6 0 7.1 1.6 7.2 7.1.2 13.8.6 13.8-13.6 13.7-14.6 0-29.1.1-44.3.1z"
        />
        <linearGradient
          id="flypathGradient"
          gradientUnits="userSpaceOnUse"
          x1="831.0503"
          y1="187.7049"
          x2="243.0503"
          y2="29.7049"
        >
          <stop offset="0.3421" style={{ stopColor: '#FFF' }} />
          <stop offset="1" style={{ stopColor: '#FFF', stopOpacity: 0 }} />
        </linearGradient>
        <path
          fill="url(#flypathGradient)"
          mask="url(#flypathmask)"
          d="M836.9 240.1c-22.3-41.5-54.2-78.8-94.8-110.7-83-65.3-193.2-101.3-310.3-101.3-87.1 0-170.3 19.9-241.4 57V108C258.8 70.2 342 48.1 431.8 48.1c23.8 0 46.9 1.4 69.4 4.2 24.2 3 75.5 14 117.7 30.7 44.3 17.5 79.3 40.8 88.3 46.9 18.7 12.5 35.9 26.4 51.6 41.9 24.4 24.6 45.1 52.5 61.7 83.3 6.4 11.8 18.2 35.4 18.2 35.4 2.9 6.2 17-.5 17.9-2.2 3.6-7.2-11.9-33.6-19.7-48.2z"
        />
        <mask id="flypathmask">
          <path
            ref={flypath}
            fill="none"
            stroke="#fff"
            strokeWidth="29"
            d="M181.8,101.4c76.5-64.5,521.7-158.7,669.2,193.4"
          />
        </mask>
      </svg>
    </SquareLink>
  );
}

DisneyPlus.propTypes = {
  fadeInStyle: PropTypes.shape({
    transform: PropTypes.object,
    opacity: PropTypes.object,
  }).isRequired,
};

export default DisneyPlus;
